
! Authot    KMS - Martin Dubois, P.Eng.
! Copyright (C) 2020 KMS. All rights reserved.
! Product   NetworkHelper
! File      NHLib_Test/Tests/Test_6_Router_0.txt

! This file test error detection when parsing configuration file.

! >>>>> CONFIG ERROR  -225  "ip address" command outside of an "interface" section
ip address 192.168.0.1 255.255.255.0

! ===== DHCP ================================================================

! TEST INFO DHCP.Error
!           -211, -212, -401

! >>>>> PARSE ERROR  -401  The command "network" must have at least 3 elements
network

ip dhcp pool Alice

	! >>>>> CONFIG ERROR  -212  The subnet address is not a valid subnet address
	network 192.168.0.1 255.255.255.0

ip dhcp pool Bob

	! >>>>> CONFIG ERROR  -211  The subnet address is not valid
	network 0.0.0.1 255.255.255.0

exit

! ===== Interface ===========================================================

! TEST INFO Interface.Error
!           -209 -210, -225, -401, -402, -404

! >>>>> PARSE ERROR  -401  The command "encapsulation dot1q" must have at least 3 elements
encapsulation dot1q

! >>>>> CONFIG ERROR  -225  "encapsulation dot1q" command outside of an "interface" section
encapsulation dot1q 10

! >>>>> PARSE ERROR  -401  The command "interface" must have at least 2 elements
interface

! >>>>> PARSE ERROR  -401  The command "interface tunnel" must have at least 3 elements
interface tunnel

! >>>>> PARSE ERROR  -401  The command "ip address" must have at least 4 elements
ip address

! >>>>> PARSE ERROR  -402  The command "ip address dhcp" must have 3 elements or less
ip address dhcp invalid

interface f0/1

	! >>>>> PARSE ERROR  -404  Invalid IPv4 address format
	ip address Invalid 255.255.255.0

	! >>>>> CONFIG ERROR  -227  Interface f0/1 - Invalid IPv4 address
	ip address 0.0.0.1 255.255.255.0

interface f0/2

	! >>>>> CONFIG ERROR  -210  Invalid IPv4 address
	ip address 0.0.0.0 255.255.255.0

interface f0/3

	ip access-group 101 in

	! >>>>> CONFIG ERROR  -209  Interface f0/3 - An access list is already set for this direction
	ip access-group 102 in

exit

! ===== NAT =================================================================

// TEST INFO NAT.Error
//           -203, -204, -230, -402

! >>>>> CONFIG ERROR  -230  Access end - The access rule source subnet is not private
access-list 1 permit 204.105.94.0 0.0.0.255

! >>>>> CONFIG ERROR  -231  Access end - The access rule source is not a private address
access-list 1 permit 204.105.94.1

! >>>>> PARSE ERROR  -402  The command "ip nat outside" must have 3 elements or less
ip nat outside invalid

interface f0/4

	ip nat outside

	! >>>>> CONFIG ERROR  -203  Interface f0/4 - A same interface cannot be NAT outside and NAT inside
	ip nat inside

interface f0/5

	ip nat inside

	! >>>>> CONFIG ERROR  -204  Interface f0/5 - A same interface cannot be NAT inside and NAT outside
	ip nat outside

exit

! ===== Route ===============================================================

! TEST INFO Route.Error
!           -228, -401

! >>>>> PARSE ERROR  -401  The command "ip route" must have at least 5 elements
ip route

! >>>>> CONFIG ERROR  -228  Route - Invalid next router IPv4 address
ip route 192.168.10.0 255.255.255.0 0.0.0.1

! ===== Sub-Interface =======================================================

! TEST INFO Sub-Interface.Error
!           -201, -202, -218, -219, -220, -221, -222, -223, -224, -403 

interface test1

	! >>>>> PARSE ERROR  -403  Interface test1 - Invalid VLAN number
	encapsulation dot1q invalid

	! >>>>> CONFIG ERROR  -201  Interface test1 - A VLAN number must be below 4096
	encapsulation dot1q 4096

	! >>>>> CONFIG ERROR  -202  Interface test1 - A VLAN must be set on sub-interface
	encapsulation dot1q 10

	ip address dhcp

	! >>>>> CONFIG ERROR  -224  Interface test1 - Do not configure an IPv4 address on an interace with DHCP client enabled
	ip address 1.2.3.4 255.255.255.0

interface test2

	ip address 1.2.3.4 255.255.255.0

	! >>>>> CONFIG ERROR  -223  Interface test2 - Do not enable DHCP client on an interface with a valid IPv4 address
	ip address dhcp

! >>>>> CONFIG ERROR  -222  Interface test2 - Do not create sub-interface for an interface with an IPv4 address configured
interface test2.1

interface test3.1

interface test3

	! >>>>> CONFIG ERROR  -221  Interface test3 - Do not set a VLAN for an interface with sub-interfaces
	encapsulation dot1q 10

	! >>>>> CONFIG ERROR  -220  Interface test3 - Do not configure an IPv4 address on an interface with sub-interfaces
	ip address 1.2.3.4 255.255.255.0

	! >>>>> CONFIG ERROR  -219  Interface test3 - Do not enable DHCP client on an interface with sub-interfaces
	ip address dhcp

interface test4

	ip address dhcp

! >>>>> CONFIG ERROR  -218  Interface test4 - Do not create sub-interface for an interface with DHCP client enabled
interface test4.1

exit

! ===== Expected error message after parsing the file =======================
! ERROR    -1  File NHLib_Test/Tests/Test_6_Router_0.txt - 38 lines with error
